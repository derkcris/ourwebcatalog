{% extends "base.html" %}

{% block content %}

<div class="article">
    <h2>
        Article {{ article.name }}
        <span>
            from <a href="{% url 'category' article.category.id %}">
                        {{ article.category.name }}
                </a>
        </span>
    </h2>

    <div class="button-bar">
        <a href="{% url 'item_add' article.id %}" class="button">Add Item</a>
        <a href="{% url 'article_remove' article.id %}" class="button"
            onclick="return confirm('Are you sure to delete {{ article.name }}')">
            Remove
        </a>
        <a href="{% url 'article_edit' article.id %}" class="button">Edit</a>
        <a href="{% url 'catalog' %}">Back</a>
    </div>

    <table class="form">
        <tbody>
            <tr>
                <td>
                    <label>
                        <span>Name</span>
                        <input type="text" name="article_name"
                            value="{{ article.name }}" disabled>
                    </label>
                </td>
                <td>
                    <label>
                        <span>Description</span>
                        <input type="text" name="article_description"
                            value="{{ article.description }}" disabled>
                    </label>
                </td>
            </tr>
            <tr>
                <td>
                    <label>
                        <span>Category</span>
                        <input type="text" name="article_category"
                            value="{{ article.category }}" disabled>
                    </label>
                </td>
                <td>
                    <label>
                        <span>Items</span>
                        <input type="text" name="article"
                            value="{{ article.item_set.count }}" disabled>
                    </label>
                </td>
            </tr>
        </tbody>
    </table>

    <h3>Items</h3>

    {% if article.item_set.all %}

    <table>
        <thead>
            <tr>
                <td>Name</td>
                <td>Description</td>
                <td>Status</td>
                <td>Condition</td>
            </tr>
        </thead>
        <tbody>
            {% for item in article.item_set.all %}
            <tr>
                <td>
                    <a href="{% url 'item' item.id %}">
                        {{ item.name }}
                    </a>
                </td>
                <td>
                    <a href="{% url 'item' item.id %}">
                        {{ item.description }}
                    </a>
                </td>
                <td>
                    <a href="{% url 'item' item.id %}">
                        {{ item.get_state }}
                    </a>
                </td>
                <td>
                    <a href="{% url 'item' item.id %}">
                        {{ item.get_condition }}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% else %}
        <p>No items availables.</p>
    {% endif %}

</div>


{% endblock %}

